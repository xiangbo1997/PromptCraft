# PromptCraft - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
**PromptCraft**

### 1.2 产品定位
一款 macOS 原生应用，帮助用户优化 AI 提示词，并提供提示词管理功能。

### 1.3 目标用户
| 用户类型 | 特征 | 核心需求 |
|----------|------|----------|
| AI 重度用户 | 每天使用 ChatGPT/Claude 等工具 | 快速优化提示词，提高 AI 输出质量 |
| 内容创作者 | 写作、营销、设计等 | 保存和复用常用提示词模板 |
| 开发者 | 使用 AI 辅助编程 | 管理编程相关提示词，快捷调用 |
| 研究人员 | 学术写作、资料整理 | 结构化提示词，专业场景优化 |

### 1.4 核心价值
- 将简单、模糊的提示词优化为结构化、高质量的完整提示词
- 提供便捷的提示词管理和快速复用能力
- 全局快捷键 + 菜单栏，随时随地快速访问

### 1.5 竞品分析

| 竞品 | 优点 | 缺点 | 我们的差异化 |
|------|------|------|-------------|
| PromptPerfect | 在线服务，功能全面 | 需要网页操作，无本地管理 | 原生应用 + 本地提示词库 |
| Raycast AI | 集成度高，快捷唤起 | 提示词管理弱，需订阅 | 专注提示词，免费使用 |
| 浏览器插件类 | 方便，无需切换 | 只能在浏览器内使用 | 全局可用，任何应用都能调用 |

---

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 提示词优化
| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| 输入框 | 用户输入原始的简单提示词，支持多行 | P0 |
| 优化模式选择 | 选择优化风格：简洁版 / 详细版 / 专业版 | P0 |
| 优化按钮 | 点击后调用 AI 接口进行优化 | P0 |
| 结果展示 | 展示优化后的完整提示词，支持 Markdown 渲染 | P0 |
| 一键复制 | 复制优化结果到剪贴板 | P0 |
| 保存到提示词本 | 将优化后的提示词保存到本地库 | P0 |
| 重新优化 | 对结果不满意时可重新生成 | P1 |
| 流式输出 | 优化结果实时流式展示，提升体验 | P1 |

**优化模式说明：**

| 模式 | 说明 | 输出长度 | 适用场景 |
|------|------|----------|----------|
| 简洁版 | 精炼优化，保持简短，突出核心意图 | 1-3 句 | 快速提问、简单任务 |
| 详细版 | 补充上下文、约束条件、输出格式要求 | 1-2 段 | 常规使用、内容创作 |
| 专业版 | 结构化提示词，包含角色设定、思考链、示例等 | 完整结构 | 复杂任务、专业场景 |

**优化策略说明：**

每种模式都会通过预设的系统提示词模板来指导 AI 进行优化：

- **简洁版策略**：保留核心意图，去除冗余，使用精准动词，字数控制在 50 字以内
- **详细版策略**：补充背景信息、明确输出格式、添加约束条件、指定语气风格
- **专业版策略**：采用结构化框架（角色-任务-步骤-输出-示例），包含思维链引导

**优化质量保障：**

| 项目 | 措施 | 优先级 |
|------|------|--------|
| 用户反馈机制 | 优化结果支持👍/👎反馈，用于改进优化策略 | P1 |
| 重新优化 | 对结果不满意可重新生成，最多 3 次 | P0 |
| 优化历史 | 保存同一输入的多次优化结果供对比 | P2 |

#### 2.1.2 提示词本（Prompt Library）
| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| 提示词列表 | 展示所有已保存的提示词，支持列表/卡片视图切换 | P0 |
| 搜索功能 | 支持标题、内容、标签的全文搜索 | P0 |
| 点击复制 | 点击选中提示词后自动复制到剪贴板 | P0 |
| 删除功能 | 支持删除不需要的提示词，需二次确认 | P0 |
| 编辑功能 | 支持修改已保存的提示词标题、内容、分类、标签 | P0 |
| 批量操作 | 批量删除、批量移动分类、批量添加标签 | P2 |
| 排序功能 | 按创建时间、更新时间、使用频率、名称排序 | P1 |

### 2.2 分类与标签系统

| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| 分类管理 | 创建、编辑、删除分类（如：写作、编程、翻译、营销等） | P0 |
| 默认分类 | 系统预置常用分类，用户可删除或修改 | P1 |
| 标签系统 | 为提示词添加多个标签，支持标签的增删改 | P0 |
| 标签颜色 | 每个标签可设置不同颜色 | P1 |
| 按分类筛选 | 在提示词本中按分类查看 | P0 |
| 按标签筛选 | 支持单标签或多标签组合筛选 | P0 |
| 智能分类建议 | 保存提示词时根据内容自动建议分类和标签 | P2 |

**预置分类：**
- 通用
- 写作
- 编程
- 翻译
- 营销
- 学习
- 工作

### 2.3 菜单栏应用

| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| 菜单栏常驻 | 应用图标常驻 macOS 菜单栏 | P0 |
| 快速访问 | 点击图标展开快捷面板（Popover） | P0 |
| 快速优化 | 在菜单栏面板中直接输入并优化提示词 | P0 |
| 最近使用 | 显示最近使用/保存的提示词（最多 10 条），点击即复制 | P0 |
| 收藏列表 | 显示收藏的提示词，快速访问 | P1 |
| 打开主窗口 | 入口跳转到完整的主应用界面 | P0 |
| 设置入口 | 快速进入设置页面 | P0 |
| 退出应用 | 退出应用入口 | P0 |

### 2.4 全局快捷键

| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| 唤起应用 | 全局快捷键快速唤起菜单栏面板或主窗口 | P0 |
| 快速优化 | 快捷键直接优化剪贴板中的文本 | P1 |
| 自定义配置 | 用户可在设置中自定义修改所有快捷键 | P0 |
| 快捷键冲突检测 | 检测并提示与系统或其他应用的快捷键冲突 | P1 |
| 启用/禁用 | 可单独启用或禁用某个快捷键 | P1 |

**默认快捷键：**

| 快捷键 | 功能 | 可自定义 | 备注 |
|--------|------|---------|------|
| ⌘ + Shift + P | 唤起菜单栏面板 | ✓ | 可能与 VSCode 冲突，建议自定义 |
| ⌘ + Shift + O | 快速优化剪贴板内容 | ✓ | |
| ⌘ + Shift + L | 打开提示词本 | ✓ | |

**快捷键冲突处理策略：**

| 场景 | 处理方式 |
|------|----------|
| 检测到系统快捷键冲突 | 启动时弹窗提示，建议修改 |
| 检测到常用应用冲突 | 显示黄色警告，提供替代方案 |
| 用户设置冲突快捷键 | 实时检测并提示，禁止保存 |
| 冲突优先级 | 系统快捷键 > 本应用快捷键 > 其他应用 |

### 2.5 设置功能

| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| **AI 服务配置** | | |
| API Key 设置 | 输入并保存 OpenAI API Key | P0 |
| API Key 验证 | 验证 Key 是否有效 | P0 |
| 模型选择 | 选择使用的模型（gpt-3.5-turbo / gpt-4 等） | P1 |
| 自定义 API 地址 | 支持代理或自建服务地址 | P1 |
| 超时时间设置 | 设置 API 请求超时时间（15/30/60 秒） | P1 |
| API 使用统计 | 显示今日/本月调用次数和预估费用 | P1 |
| 每日调用限额 | 设置每日最大调用次数，防止误操作 | P2 |
| **快捷键设置** | | |
| 快捷键自定义 | 修改各功能的快捷键 | P0 |
| 快捷键重置 | 恢复默认快捷键 | P1 |
| **外观设置** | | |
| 主题切换 | 浅色 / 深色 / 跟随系统 | P0 |
| **通用设置** | | |
| 开机启动 | 设置是否开机自动启动 | P1 |
| 默认优化模式 | 设置默认的优化模式 | P1 |
| 复制后提示 | 复制成功后是否显示提示 | P2 |
| **数据管理** | | |
| 导出数据 | 导出所有提示词为 JSON 文件 | P1 |
| 导入数据 | 从 JSON 文件导入提示词 | P1 |
| 自动备份 | 每周自动备份数据到本地 | P1 |
| iCloud 同步 | 可选的 iCloud 数据同步（跨设备） | P2 |
| 清空数据 | 清空所有提示词（需二次确认） | P2 |
| 提示词版本管理 | 保留编辑历史，支持版本回退 | P2 |
| **关于** | | |
| 版本信息 | 显示当前版本号 | P0 |
| 检查更新 | 检查是否有新版本 | P2 |

### 2.6 其他功能

| 功能项 | 描述 | 优先级 |
|--------|------|--------|
| 收藏功能 | 标记常用提示词，快速访问 | P0 |
| 使用统计 | 记录每个提示词的使用次数 | P2 |
| 快捷操作 | 右键菜单支持复制、编辑、删除、收藏等 | P1 |
| 预置模板库 | 内置常用提示词模板（代码审查、文章润色、翻译等） | P1 |
| 模板导入 | 支持从文件或 URL 导入提示词模板 | P2 |
| 错误日志 | 记录应用错误日志，方便调试和反馈 | P2 |
| 用户反馈入口 | 提供 Bug 报告和功能建议入口 | P2 |

---

## 3. 用户流程

### 3.1 首次使用流程
```
启动应用 → 欢迎页引导 → 配置 API Key → 验证成功 → 进入主界面
                              ↓
                         验证失败 → 提示错误 → 重新输入或跳过（功能受限）
```

### 3.2 提示词优化流程
```
输入简单提示词 → 选择优化模式 → 点击"优化" → 显示加载动画
     ↓                                              ↓
     ←──────────── 重新优化 ←───────── 展示优化结果（流式）
                                              ↓
                              ┌────────┬──────────────┐
                              ↓        ↓              ↓
                            复制    保存到提示词本   重新优化
```

### 3.3 提示词复用流程
```
打开提示词本 → 搜索/筛选/浏览 → 点击提示词 → 自动复制到剪贴板 → Toast 提示
                                    ↓
                            或右键 → 编辑/删除/收藏
```

### 3.4 菜单栏快捷流程
```
点击菜单栏图标 / 按下快捷键 → 展开快捷面板 → 输入并优化 / 选择最近使用 → 复制
```

### 3.5 异常处理流程

| 异常场景 | 处理方式 |
|----------|----------|
| API Key 未配置 | 弹窗提示，引导去设置页配置 |
| API Key 无效 | 显示错误信息，提示检查 Key |
| 网络连接失败 | 显示网络错误，提供重试按钮 |
| API 请求超时 | 显示超时提示（默认 30 秒），提供重试按钮 |
| API 调用限流 | 显示限流提示，建议稍后重试 |
| 输入内容为空 | 按钮置灰，提示输入内容 |
| 输入内容过长 | 提示字数限制（最大 2000 字），显示当前字数 |

**输入限制说明：**

| 项目 | 限制 | 说明 |
|------|------|------|
| 输入字数上限 | 2000 字 | 超过后禁止提交，实时显示字数统计 |
| 优化结果长度 | 根据模式自适应 | 简洁版 ≤100 字，详细版 ≤500 字，专业版 ≤1500 字 |
| API 请求超时 | 30 秒（可设置） | 可在设置中调整为 15/30/60 秒 |
| 重试次数 | 最多 3 次 | 失败后自动重试，超过次数需手动操作 |

---

## 4. UI/UX 设计要求

### 4.1 设计风格
- **遵循 macOS Human Interface Guidelines**
- 简洁、现代的界面风格
- 支持浅色/深色模式
- 原生 macOS 控件和交互体验
- 参考应用：Bear、Things 3、Craft

### 4.2 主窗口布局

```
┌─────────────────────────────────────────────────────────────────┐
│  ← →  PromptCraft                              ⚙️ 设置         │
├─────────────────┬───────────────────────────────────────────────┤
│  [侧边栏]        │       [主内容区]                              │
│                 │                                               │
│  🏠 优化提示词   │   ┌─────────────────────────────────────┐   │
│  📚 提示词本     │   │  输入你的提示词...                    │   │
│                 │   │                                       │   │
│  ─────────────  │   │                                       │   │
│  分类           │   └─────────────────────────────────────┘   │
│  · 全部         │                                               │
│  · 通用         │   [简洁版 ▼]        [✨ 优化]  [清空]        │
│  · 写作         │                                               │
│  · 编程         │   ┌─────────────────────────────────────┐   │
│  · 翻译         │   │  优化结果展示区                       │   │
│  + 添加分类     │   │                                       │   │
│                 │   │  （支持 Markdown 渲染）               │   │
│  ─────────────  │   │                                       │   │
│  标签           │   └─────────────────────────────────────┘   │
│  · #常用        │                                               │
│  · #工作        │       [📋 复制]  [💾 保存到提示词本]         │
│                 │                                               │
└─────────────────┴───────────────────────────────────────────────┘
```

### 4.3 提示词本布局

```
┌─────────────────────────────────────────────────────────────────┐
│  ← →  提示词本                    🔍 搜索...        ⚙️         │
├─────────────────┬───────────────────────────────────────────────┤
│  [侧边栏]        │  排序: 最近使用 ▼    视图: ▦ ≡              │
│                 │───────────────────────────────────────────────│
│  📚 全部 (24)    │  ┌─────────────────────────────────────┐    │
│                 │  │ ⭐ 代码审查助手                       │    │
│  分类           │  │ 帮我审查以下代码，指出问题和改进...    │    │
│  · 通用 (5)     │  │ #编程 #工作         使用 12 次        │    │
│  · 写作 (8)     │  └─────────────────────────────────────┘    │
│  · 编程 (6)     │                                               │
│  · 翻译 (3)     │  ┌─────────────────────────────────────┐    │
│  · 营销 (2)     │  │ 文章润色优化                          │    │
│                 │  │ 请帮我润色以下文章，保持原意...        │    │
│  ─────────────  │  │ #写作               使用 8 次         │    │
│  ⭐ 收藏 (3)    │  └─────────────────────────────────────┘    │
│                 │                                               │
│                 │  ┌─────────────────────────────────────┐    │
│                 │  │ 英译中专业翻译                        │    │
│                 │  │ 将以下英文翻译成中文，保持专业...      │    │
│                 │  │ #翻译               使用 5 次         │    │
│                 │  └─────────────────────────────────────┘    │
└─────────────────┴───────────────────────────────────────────────┘
```

### 4.4 菜单栏面板布局

**面板尺寸：** 宽度 320px，高度自适应（最大 500px）

```
                                    ┌──────────────────────────┐
                                    │  🔮 PromptCraft          │
                                    ├──────────────────────────┤
                                    │  ┌────────────────────┐  │
                                    │  │ 输入提示词...       │  │
                                    │  └────────────────────┘  │
                                    │  [简洁▼] [✨ 优化]      │
                                    ├──────────────────────────┤
                                    │  最近使用                │
                                    │  · 代码审查助手     📋   │
                                    │  · 文章润色优化     📋   │
                                    │  · 英译中专业翻译   📋   │
                                    ├──────────────────────────┤
                                    │  ⭐ 收藏                 │
                                    │  · 周报生成器       📋   │
                                    ├──────────────────────────┤
                                    │  🖥️ 打开主窗口          │
                                    │  ⚙️ 设置                │
                                    │  ⏻ 退出                 │
                                    └──────────────────────────┘
```

### 4.5 设置页面布局

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 设置                                                         │
├─────────────────┬───────────────────────────────────────────────┤
│                 │                                               │
│  🤖 AI 服务     │   AI 服务配置                                 │
│  ⌨️ 快捷键      │   ─────────────────────────────────────────   │
│  🎨 外观       │                                               │
│  ⚙️ 通用       │   OpenAI API Key                              │
│  💾 数据       │   ┌─────────────────────────────────────┐     │
│  ℹ️ 关于       │   │ sk-xxxx...xxxx                      │     │
│                 │   └─────────────────────────────────────┘     │
│                 │   [验证] ✅ 验证通过                          │
│                 │                                               │
│                 │   模型选择                                    │
│                 │   ┌─────────────────────────────────────┐     │
│                 │   │ gpt-4                           ▼   │     │
│                 │   └─────────────────────────────────────┘     │
│                 │                                               │
│                 │   API 地址（可选）                            │
│                 │   ┌─────────────────────────────────────┐     │
│                 │   │ https://api.openai.com              │     │
│                 │   └─────────────────────────────────────┘     │
│                 │                                               │
└─────────────────┴───────────────────────────────────────────────┘
```

### 4.6 交互细节

| 场景 | 交互方式 |
|------|----------|
| 复制成功 | 显示轻量 Toast 提示，1.5 秒后自动消失 |
| 优化中 | 显示加载动画 + "正在优化..." 文字 |
| 搜索 | 实时过滤，300ms 防抖 |
| 删除 | 二次确认弹窗 |
| 保存成功 | Toast 提示 + 侧边栏数字更新 |
| 快捷键冲突 | 红色警告提示 |
| 输入框 | 支持 ⌘+Enter 快捷提交，实时显示字数统计 |
| 列表项悬浮 | 显示操作按钮（复制、编辑、删除） |
| 空状态 | 显示引导插图和提示文字 |
| 优化模式选择 | 悬浮显示每种模式的详细说明和示例 |
| 首次使用 | 显示功能引导提示（可关闭） |

**空状态设计：**

| 场景 | 插图 | 提示文字 | 引导操作 |
|------|------|----------|----------|
| 提示词本为空 | 空文件夹图标 | "还没有保存任何提示词" | "开始优化你的第一个提示词" 按钮 |
| 搜索无结果 | 搜索图标 | "未找到匹配的提示词" | "清除搜索条件" 按钮 |
| 分类为空 | 文件夹图标 | "该分类下暂无提示词" | "浏览其他分类" 链接 |
| 收藏为空 | 星星图标 | "还没有收藏任何提示词" | "去提示词本收藏" 按钮 |

---

## 5. 技术方案

### 5.1 技术选型

| 方向 | 选择 | 说明 |
|------|------|------|
| 开发框架 | **SwiftUI** | macOS 原生开发，最佳用户体验 |
| 最低系统版本 | macOS 14.0+ | 支持 SwiftData 和 @Observable |
| AI 接口 | **OpenAI API**（初期） | 后期支持切换其他 AI 服务 |
| 本地存储 | SwiftData | 提示词、分类、标签的持久化存储 |
| 快捷键 | HotKey 库 | 实现全局快捷键监听 |
| 网络请求 | URLSession + async/await | 原生网络库，支持流式响应 |
| 安全存储 | Keychain | API Key 安全存储 |
| 国际化 | SwiftUI Localization | v1.0 支持中文，v1.x 扩展英文等 |
| 日志系统 | OSLog | 记录错误和调试信息 |
| 崩溃收集 | 本地日志文件 | 不上传云端，仅本地存储 |

### 5.2 AI 服务架构（可扩展）

```
┌─────────────────────────────────────────┐
│           AI Service Protocol           │
│         (统一接口抽象层)                 │
├─────────────┬─────────────┬─────────────┤
│  OpenAI     │   Claude    │   其他...   │
│  Adapter    │   Adapter   │   Adapter   │
└─────────────┴─────────────┴─────────────┘
```

- 设计统一的 AI 服务协议（Protocol）
- 初期实现 OpenAI Adapter
- 后期可扩展 Claude、本地模型等

### 5.3 数据模型

```swift
// 提示词
@Model
class Prompt {
    var id: UUID
    var title: String              // 标题
    var originalContent: String    // 原始输入
    var optimizedContent: String   // 优化结果
    var optimizeMode: OptimizeMode // 优化模式
    var category: Category?        // 所属分类
    var tags: [Tag]               // 标签列表
    var isFavorite: Bool          // 是否收藏
    var usageCount: Int           // 使用次数
    var createdAt: Date
    var updatedAt: Date
    var lastUsedAt: Date?         // 最后使用时间
}

// 优化模式
enum OptimizeMode: String, Codable {
    case concise = "简洁版"
    case detailed = "详细版"
    case professional = "专业版"
}

// 分类
@Model
class Category {
    var id: UUID
    var name: String
    var icon: String              // SF Symbol 图标名
    var order: Int                // 排序权重
    var isSystem: Bool            // 是否系统预置
    var createdAt: Date
}

// 标签
@Model
class Tag {
    var id: UUID
    var name: String
    var color: String             // 十六进制颜色值
    var createdAt: Date
}

// 应用设置
struct AppSettings: Codable {
    var theme: Theme              // 主题
    var defaultOptimizeMode: OptimizeMode
    var launchAtLogin: Bool       // 开机启动
    var showCopyToast: Bool       // 复制提示
    var selectedModel: String     // AI 模型
    var customAPIEndpoint: String? // 自定义 API 地址
}

// 快捷键配置
struct HotkeySettings: Codable {
    var togglePanel: KeyCombo     // 唤起面板
    var quickOptimize: KeyCombo   // 快速优化
    var openLibrary: KeyCombo     // 打开提示词本
}
```

### 5.4 项目结构

```
PromptCraft/
├── App/
│   ├── PromptCraftApp.swift      # 应用入口
│   └── AppDelegate.swift         # 应用生命周期
├── Models/
│   ├── Prompt.swift
│   ├── Category.swift
│   ├── Tag.swift
│   └── Settings.swift
├── Views/
│   ├── Main/
│   │   ├── MainWindow.swift
│   │   ├── SidebarView.swift
│   │   └── ContentView.swift
│   ├── Optimize/
│   │   ├── OptimizeView.swift
│   │   └── ResultView.swift
│   ├── Library/
│   │   ├── LibraryView.swift
│   │   ├── PromptListView.swift
│   │   └── PromptCardView.swift
│   ├── MenuBar/
│   │   ├── MenuBarController.swift
│   │   └── MenuBarPopover.swift
│   ├── Settings/
│   │   ├── SettingsView.swift
│   │   ├── AISettingsView.swift
│   │   ├── HotkeySettingsView.swift
│   │   └── GeneralSettingsView.swift
│   └── Components/
│       ├── ToastView.swift
│       ├── SearchBar.swift
│       └── TagView.swift
├── Services/
│   ├── AI/
│   │   ├── AIServiceProtocol.swift
│   │   ├── OpenAIService.swift
│   │   └── PromptTemplates.swift
│   ├── HotkeyService.swift
│   ├── ClipboardService.swift
│   └── StorageService.swift
├── Utils/
│   ├── Extensions/
│   └── Constants.swift
└── Resources/
    └── Assets.xcassets
```

---

## 6. 非功能性需求

### 6.1 性能要求

| 指标 | 要求 | 备注 |
|------|------|------|
| 应用启动时间 | < 1 秒 | 冷启动，包含数据加载 |
| 菜单栏面板响应 | < 100ms | 点击图标到面板显示 |
| 搜索响应时间 | < 200ms | 1000 条提示词内 |
| 内存占用 | < 100MB（常驻） | 空闲状态 |
| CPU 占用 | < 1%（空闲时） | 后台运行 |
| 大数据量性能 | 支持 5000+ 提示词 | 使用索引优化搜索 |
| 流式输出延迟 | < 500ms | 首字显示时间 |

### 6.2 安全要求

| 项目 | 措施 |
|------|------|
| API Key 存储 | 使用 macOS Keychain 加密存储，不明文保存 |
| 数据存储 | 本地存储，不上传到云端 |
| 网络通信 | 仅与配置的 AI 服务通信，HTTPS 加密 |

### 6.3 兼容性

| 项目 | 要求 |
|------|------|
| 系统版本 | macOS 14.0 (Sonoma) 及以上 |
| 芯片架构 | 同时支持 Apple Silicon 和 Intel |
| 屏幕适配 | 支持不同分辨率和缩放比例 |

---

## 7. 应用形态

- **Dock 图标**：显示在 Dock 中，作为标准 macOS 应用
- **菜单栏图标**：同时常驻菜单栏，提供快捷访问入口
- 点击 Dock 图标打开主窗口
- 点击菜单栏图标展开快捷面板
- 关闭主窗口后应用继续在菜单栏运行

---

## 8. 版本规划

### v1.0 MVP

| 功能模块 | 包含功能 |
|----------|----------|
| 提示词优化 | 输入、三种模式优化、结果展示、复制、保存 |
| 提示词本 | 列表展示、搜索、点击复制、编辑、删除 |
| 分类标签 | 分类管理、标签管理、筛选 |
| 菜单栏 | 常驻图标、快捷面板、最近使用 |
| 快捷键 | 全局快捷键、自定义配置 |
| 设置 | API 配置、快捷键设置、主题切换 |
| 其他 | 收藏功能、深浅色模式 |

### v1.x 迭代

| 版本 | 计划功能 |
|------|----------|
| v1.1 | 流式输出、导入导出、使用统计 |
| v1.2 | 更多 AI 服务支持（Claude 等） |
| v1.3 | 自定义优化模板、批量操作 |

---

## 9. 验收标准

### 9.1 功能验收

| 功能 | 验收标准 |
|------|----------|
| 提示词优化 | 输入内容后选择任意模式，点击优化能正确返回结果 |
| 复制功能 | 点击复制后，剪贴板内容正确，显示 Toast 提示 |
| 保存功能 | 保存后能在提示词本中找到，分类标签正确 |
| 搜索功能 | 输入关键词能正确过滤出匹配的提示词 |
| 快捷键 | 全局快捷键在任何应用下都能正确响应 |
| 菜单栏 | 点击图标能展开面板，功能正常 |
| 设置 | 所有设置项能正确保存和生效 |

### 9.2 体验验收

| 项目 | 验收标准 |
|------|----------|
| 响应速度 | 所有操作响应流畅，无明显卡顿 |
| 视觉一致性 | 深浅色模式切换正常，UI 风格统一 |
| 错误处理 | 异常情况有友好提示，不会崩溃 |
| 引导体验 | 首次使用有清晰的引导流程 |

---

## 10. 设计原则

### 10.1 核心理念
- **隐私优先**：所有数据本地存储，不上传云端，API Key 加密保存
- **本地优先**：核心功能无需联网即可使用（提示词管理、浏览、复制）
- **简洁高效**：界面简洁，操作流畅，减少用户学习成本
- **原生体验**：遵循 macOS 设计规范，提供原生应用体验

### 10.2 交互原则
- **快捷至上**：全局快捷键 + 菜单栏，随时随地快速访问
- **即时反馈**：所有操作提供即时视觉反馈（Toast、动画、状态变化）
- **容错设计**：重要操作二次确认，支持撤销和重试
- **渐进式引导**：首次使用提供引导，老用户可跳过

---

## 11. 术语表

| 术语 | 定义 |
|------|------|
| 提示词 (Prompt) | 用户输入给 AI 的指令或问题 |
| 提示词本 (Prompt Library) | 保存和管理提示词的本地库 |
| 优化模式 | 三种优化风格：简洁版、详细版、专业版 |
| 分类 (Category) | 提示词的分类标签，如写作、编程、翻译等 |
| 标签 (Tag) | 提示词的多维度标记，支持多标签 |
| 收藏 (Favorite) | 标记常用提示词，快速访问 |
| 流式输出 | AI 响应实时逐字显示，而非等待完整结果 |
| 菜单栏面板 (Popover) | 点击菜单栏图标弹出的快捷操作面板 |
| 全局快捷键 | 在任何应用下都能响应的系统级快捷键 |

---

## 12. 离线功能说明

### 12.1 离线可用功能
| 功能 | 是否可用 | 说明 |
|------|---------|------|
| 提示词本浏览 | ✅ | 完全离线可用 |
| 搜索提示词 | ✅ | 本地搜索，无需联网 |
| 复制提示词 | ✅ | 完全离线可用 |
| 编辑提示词 | ✅ | 本地编辑，无需联网 |
| 删除提示词 | ✅ | 完全离线可用 |
| 分类管理 | ✅ | 完全离线可用 |
| 标签管理 | ✅ | 完全离线可用 |
| 提示词优化 | ❌ | 需要联网调用 AI 服务 |
| 导入导出 | ✅ | 完全离线可用 |

### 12.2 离线状态提示
- 检测到无网络时，优化按钮置灰并显示"无网络连接"提示
- 提示词本等离线功能正常使用
- 状态栏显示离线图标

---

## 13. 常见问题 (FAQ)

### Q1: 为什么需要 API Key？
**A:** PromptCraft 使用 OpenAI 的 API 来优化提示词，需要您自己的 API Key 来调用服务。这样可以确保您的数据隐私和使用灵活性。

### Q2: 数据存储在哪里？
**A:** 所有提示词数据都存储在您的 Mac 本地，不会上传到任何云端服务器。API Key 使用 macOS Keychain 加密存储。

### Q3: 使用会产生费用吗？
**A:** 应用本身免费，但调用 OpenAI API 会产生费用（按使用量计费）。您可以在设置中查看调用统计和预估费用。

### Q4: 支持哪些 AI 服务？
**A:** v1.0 版本支持 OpenAI（GPT-3.5/GPT-4），后续版本将支持 Claude、本地模型等更多选择。

### Q5: 可以在多台 Mac 上同步数据吗？
**A:** v1.0 版本支持手动导出/导入数据，v1.x 版本将支持 iCloud 自动同步（可选）。

### Q6: 快捷键与其他应用冲突怎么办？
**A:** 应用会自动检测冲突并提示，您可以在设置中自定义修改所有快捷键。

### Q7: 如何反馈问题或建议？
**A:** 在"设置 > 关于"中有反馈入口，您可以提交 Bug 报告或功能建议。

### Q8: 应用会收集我的数据吗？
**A:** 不会。应用不收集任何用户数据，所有信息都保存在本地。错误日志也仅存储在本地，不会上传。

---

*文档版本: v2.1*
*创建日期: 2025-12-02*
*更新日期: 2025-12-02*
*状态: 需求已确认*
