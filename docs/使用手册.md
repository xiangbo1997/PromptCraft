# PromptCraft 使用手册

**版本**：1.0
**最后更新**：2025-12-12
**作者**：Claude Code

---

## 目录

1. [简介](#简介)
2. [安装指南](#安装指南)
3. [快速开始](#快速开始)
4. [功能详解](#功能详解)
   - [提示词优化](#提示词优化)
   - [菜单栏](#菜单栏)
   - [提示词库](#提示词库)
   - [收藏夹](#收藏夹)
   - [历史记录](#历史记录)
   - [标签与分类](#标签与分类)
   - [设置](#设置)
5. [进阶使用](#进阶使用)
   - [自定义系统提示词](#自定义系统提示词)
   - [API 服务配置技巧](#api-服务配置技巧)
   - [工作流优化建议](#工作流优化建议)
6. [快捷键](#快捷键)
7. [常见问题](#常见问题)
8. [故障排除](#故障排除)
9. [隐私与安全](#隐私与安全)
10. [反馈与支持](#反馈与支持)

---

## 简介

PromptCraft 是一款 macOS 原生应用，专为 AI 提示词优化设计。它可以帮助您：

- **优化提示词**：将您的想法转换为结构化、清晰的 AI 提示词
- **管理提示词**：保存、分类、收藏您的提示词模板
- **提高效率**：通过全局快捷键快速访问，支持菜单栏图标

### 系统要求

- macOS 14.0 (Sonoma) 或更高版本
- 需要有效的 OpenAI API Key（或兼容的 API 服务）
- 网络连接（用于 API 调用）

### 功能亮点

| 功能 | 描述 |
|------|------|
| 智能优化 | 三种优化模式：简洁版、详细版、专业版 |
| 流式输出 | 实时显示优化结果，无需等待完整响应 |
| 菜单栏常驻 | 点击菜单栏图标即可快速优化 |
| 全局快捷键 | 随时呼出应用，支持自定义 |
| 多语言 | 支持简体中文、繁体中文、English、日本語 |
| 深色模式 | 跟随系统或手动切换 |

---

## 安装指南

### 方式一：直接下载（推荐）

1. 前往 [GitHub Releases](https://github.com/your-repo/PromptCraft/releases) 页面
2. 下载最新版本的 `PromptCraft-x.x.x.dmg` 文件
3. 打开 DMG 文件
4. 将 `PromptCraft.app` 拖入 `Applications` 文件夹
5. 首次运行：
   - 如果 DMG 已公证：直接双击运行
   - 如果提示"无法验证开发者"：
     1. 打开 **系统设置 → 隐私与安全性**
     2. 向下滚动找到"PromptCraft 已被阻止"
     3. 点击 **仍要打开**
     4. 在弹出的对话框中点击 **打开**

### 方式二：从源码构建

适合开发者或需要自定义的用户。

1. **克隆仓库**
   ```bash
   git clone https://github.com/your-repo/PromptCraft.git
   cd PromptCraft
   ```

2. **使用 Xcode 打开项目**
   ```bash
   open PromptCraft.xcodeproj
   ```

3. **构建并运行**
   - 在 Xcode 中选择目标设备（My Mac）
   - 按 `⌘R` 运行
   - 或使用命令行构建 Release 版本：
   ```bash
   xcodebuild -project PromptCraft.xcodeproj -scheme PromptCraft -configuration Release build
   ```

4. **安装应用**
   - 构建完成后，在 `DerivedData` 目录找到 `PromptCraft.app`
   - 拖动到 `/Applications` 文件夹

### 方式三：使用构建脚本打包

项目提供了自动化构建脚本：

```bash
# 构建 Release 版本并生成 DMG
./scripts/build-release.sh 1.0.0

# 输出文件在 build/ 目录下：
# - PromptCraft-1.0.0.dmg
# - PromptCraft-1.0.0.dmg.sha256
```

### 首次启动

1. 启动应用后，菜单栏会出现 PromptCraft 图标
2. 点击图标或使用快捷键 `⌘⇧P` 打开主窗口
3. 前往"设置"配置 API Key

---

## 快速开始

### 1. 配置 API

首次使用前，您需要配置 AI 服务：

1. 打开应用，点击左侧边栏的 **设置** (Settings)
2. 在 **API 配置** 部分：
   - 输入您的 **API Key**
   - 如果使用非 OpenAI 服务，修改 **自定义 API 端点**
   - 点击 **验证** 按钮，等待 API Key 验证完成（显示绿色勾号）
3. 从下拉列表中选择您要使用的 **AI 模型**
4. 设置会自动保存

### 2. 优化您的第一个提示词

1. 点击左侧边栏的 **优化** (Optimize)
2. 在输入框中输入您的原始提示词或想法
3. 选择优化模式：
   - **简洁** - 精简到 50 字以内
   - **详细** - 完整保留所有信息
   - **专业** - 结构化专业格式
4. 点击 **优化** 按钮
5. 查看优化结果，可以：
   - **复制** - 复制到剪贴板
   - **保存** - 保存到提示词库
   - **交换** - 将输出移到输入区域，进行迭代优化

---

## 功能详解

### 提示词优化

#### 优化模式详解

| 模式 | 描述 | 输出特点 | 适用场景 |
|------|------|----------|----------|
| 简洁 | 将提示词精简到 50 字以内 | 核心意图、精准动词 | 简单问答、快速查询 |
| 详细 | 完整保留所有信息并优化结构 | 背景、格式、约束、风格 | 复杂任务、详细说明 |
| 专业 | 结构化格式，包含角色、目标等 | 角色设定、步骤、示例 | 正式文档、专业写作 |

#### 操作说明

- **输入区域**：输入您的原始提示词，支持多行文本
- **输出区域**：显示 AI 优化后的结果（流式输出，实时显示）
- **字符统计**：实时显示输入/输出的字符数及变化百分比
- **交换按钮**：将输出内容移到输入区域，方便迭代优化

#### 统计信息

页面下方显示您的使用统计：
- 总优化次数
- 成功率
- 已保存的模板数量

---

### 菜单栏

PromptCraft 在菜单栏常驻图标，点击即可快速访问。

#### 菜单栏面板

点击菜单栏图标后，显示弹出面板，包含三个标签页：

| 标签页 | 功能 |
|--------|------|
| **Optimize** | 快速优化：输入提示词，选择模式，一键优化 |
| **Recent** | 最近使用：显示最近优化的提示词历史 |
| **Favorites** | 收藏夹：快速访问收藏的提示词（开发中） |

#### 快速优化功能

1. 点击菜单栏图标
2. 在 **Optimize** 标签页输入提示词
3. 选择优化模式（简洁/详细/专业）
4. 点击 **Optimize** 按钮
5. 结果显示后，点击 **Copy** 复制到剪贴板

#### 底部操作

- **Open Main Window** - 打开主应用窗口
- **Preferences...** - 打开设置
- **Quit PromptCraft** - 退出应用

---

### 提示词库

提示词库是您保存和管理所有提示词模板的地方。

#### 保存提示词

优化完成后，点击 **保存** 按钮即可保存到库中。保存时会自动：
- 生成标题（基于内容）
- 记录原始内容和优化结果
- 记录使用的优化模式

#### 管理提示词

- **搜索**：在搜索框中输入关键词快速查找
- **排序**：按名称、日期、使用次数排序
- **筛选**：按收藏状态、优化模式筛选

#### 批量操作

点击 **选择** 按钮进入批量模式：
- 多选提示词
- 批量删除
- 批量收藏/取消收藏

#### 导入导出

- **导出**：将所有提示词导出为 JSON 文件备份
- **导入**：从 JSON 文件导入提示词

导出的 JSON 文件包含以下字段：
```json
{
  "id": "uuid",
  "title": "提示词标题",
  "originalContent": "原始内容",
  "optimizedContent": "优化后内容",
  "optimizeMode": "简洁版/详细版/专业版",
  "isFavorite": true,
  "usageCount": 5,
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-02T00:00:00Z"
}
```

#### 提示词卡片功能

每个提示词卡片支持：
- 点击查看详情
- 一键复制优化后的内容
- 添加/移除收藏
- 使用提示词（填充到优化页面）
- 删除

---

### 收藏夹

收藏您常用的提示词，便于快速访问。

#### 添加收藏

- 在提示词库中，点击卡片上的 ❤️ 按钮
- 或在提示词详情页点击收藏按钮

#### 搜索收藏

收藏夹支持独立的搜索功能，快速定位收藏的提示词。

---

### 历史记录

自动记录您的所有优化操作。

#### 时间分组

历史记录按时间自动分组：
- 今天
- 昨天
- 本周
- 本月
- 更早

#### 筛选功能

- **日期筛选**：选择特定日期范围
- **模式筛选**：按优化模式（简洁/详细/专业）筛选

#### 操作

- 查看历史记录详情
- 复制到剪贴板
- 从历史记录重新优化

---

### 标签与分类

使用标签和分类组织您的提示词。

#### 管理标签

1. 进入 **标签与分类** 页面
2. 点击 **添加标签** 创建新标签
3. 选择标签颜色
4. 为提示词添加标签

#### 管理分类

1. 点击 **添加分类** 创建新分类
2. 为分类添加描述和图标
3. 将提示词归入分类

#### 按标签/分类筛选

在提示词库中，点击标签或分类名称即可筛选相关提示词。

---

### 设置

#### API 配置

| 设置项 | 说明 | 默认值 |
|--------|------|--------|
| API Key | 您的 OpenAI API 密钥 | - |
| 自定义端点 | 如使用第三方服务，输入其 API 地址 | https://api.openai.com/v1 |
| 模型选择 | 选择要使用的 AI 模型 | gpt-4 |
| 超时时间 | API 请求超时时间 | 30 秒 |
| 重试次数 | 请求失败时的重试次数 | 3 次 |
| 每日调用限制 | 可选，限制每日 API 调用次数 | 无限制 |

#### 外观设置

| 设置项 | 选项 |
|--------|------|
| 主题 | 浅色 / 深色 / 跟随系统 |
| 语言 | 简体中文 / 繁体中文 / English / 日本語 / 跟随系统 |

#### 快捷键设置

自定义全局快捷键（点击输入框后按下新快捷键即可录制）：

| 功能 | 默认快捷键 |
|------|------------|
| 打开/关闭面板 | ⌘⇧P |
| 快速优化 | ⌘⇧O |
| 打开提示词库 | ⌘⇧L |

#### 通用设置

| 设置项 | 说明 |
|--------|------|
| 开机启动 | 登录时自动启动应用 |
| 默认优化模式 | 新建优化时的默认模式 |
| 复制提示 | 复制成功后是否显示提示 |

#### 系统提示词

自定义每种优化模式的系统提示词，让优化结果更符合您的需求。

1. 点击对应模式的行进入编辑器
2. 修改提示词内容
3. 点击 **保存**
4. 可随时点击 **恢复默认** 重置

#### 数据管理

- **导出数据** - 导出所有提示词为 JSON
- **导入数据** - 从 JSON 文件导入
- **清除数据** - 清除所有数据（需确认）

---

## 进阶使用

### 自定义系统提示词

系统提示词决定了 AI 如何优化您的提示词。通过自定义，您可以让输出更符合个人风格。

#### 默认系统提示词

**简洁模式**：
```
你是一个提示词优化专家。请将用户的输入优化为简洁、精准的提示词。
要求：
1. 保留核心意图
2. 去除冗余表达
3. 使用精准动词
4. 字数控制在50字以内
```

**详细模式**：
```
你是一个提示词优化专家。请将用户的输入优化为详细、完整的提示词。
要求：
1. 补充背景信息和上下文
2. 明确输出格式要求
3. 添加必要的约束条件
4. 指定语气和风格
```

**专业模式**：
```
你是一个提示词优化专家。请将用户的输入优化为专业、结构化的提示词。
要求：
1. 包含角色设定
2. 明确任务目标
3. 提供思考步骤
4. 指定输出格式
5. 给出示例（如适用）
```

#### 自定义示例

**代码审查专用提示词**：
```
你是一个代码审查提示词专家。将用户的需求转换为专业的代码审查提示词。
要求：
1. 明确代码语言和框架
2. 指定审查重点（安全性/性能/可读性/最佳实践）
3. 要求提供具体的改进建议
4. 使用结构化输出格式
```

**创意写作专用提示词**：
```
你是一个创意写作提示词专家。将用户的想法转换为激发创意的提示词。
要求：
1. 设定创作风格和语气
2. 提供具体的场景或人物设定
3. 添加创作约束（字数、视角、时代背景等）
4. 鼓励独特视角和创新表达
```

### API 服务配置技巧

#### 使用第三方 API 服务

PromptCraft 支持所有 OpenAI 兼容的 API 服务。配置方法：

| 服务 | 端点地址 | 说明 |
|------|----------|------|
| OpenAI 官方 | https://api.openai.com/v1 | 默认 |
| Azure OpenAI | https://YOUR_RESOURCE.openai.azure.com | 需要特殊配置 |
| DeepSeek | https://api.deepseek.com | 国内可用 |
| OpenRouter | https://openrouter.ai/api/v1 | 多模型网关 |
| 本地 Ollama | http://localhost:11434/v1 | 本地部署 |

#### 模型选择建议

| 使用场景 | 推荐模型 | 理由 |
|----------|----------|------|
| 日常优化 | gpt-3.5-turbo | 速度快、成本低 |
| 复杂任务 | gpt-4 / gpt-4-turbo | 理解力强、输出质量高 |
| 本地隐私 | llama3 (Ollama) | 数据不离开本地 |

### 工作流优化建议

#### 迭代优化技巧

1. 先用"简洁模式"获取核心要点
2. 将结果交换到输入区
3. 再用"详细模式"或"专业模式"扩展
4. 根据需要微调输出

#### 批量处理技巧

1. 将相似提示词保存到同一分类
2. 使用标签标记用途（如：代码、写作、翻译）
3. 定期导出备份重要模板

---

## 快捷键

### 全局快捷键

| 快捷键 | 功能 | 可自定义 |
|--------|------|----------|
| ⌘⇧P | 打开/关闭主面板 | ✓ |
| ⌘⇧O | 快速优化（使用剪贴板内容） | ✓ |
| ⌘⇧L | 打开提示词库 | ✓ |

### 应用内快捷键

| 快捷键 | 功能 |
|--------|------|
| ⌘C | 复制 |
| ⌘V | 粘贴 |
| ⌘S | 保存当前提示词 |
| ⌘, | 打开设置 |
| ⌘Q | 退出应用 |
| ⌘W | 关闭窗口 |

---

## 常见问题

### API 相关

#### Q: API Key 验证失败怎么办？

**A**: 请按以下步骤排查：
1. 确认 API Key 正确复制（无多余空格或换行）
2. 检查自定义端点地址是否正确（注意 `/v1` 后缀）
3. 确认网络连接正常（尝试访问 api.openai.com）
4. 检查 API 账户余额是否充足
5. 确认 API Key 未过期或被禁用

#### Q: 请求超时怎么办？

**A**:
1. 在设置中增加超时时间（建议 60 秒）
2. 检查网络连接稳定性
3. 尝试切换到更快的 API 端点
4. 使用更快的模型（如 gpt-3.5-turbo）

#### Q: 返回 429 错误（速率限制）？

**A**: 这表示 API 调用频率过高或余额不足：
1. 等待几分钟后重试
2. 在设置中配置每日调用限制
3. 升级 API 账户套餐
4. 检查账户余额

### 优化相关

#### Q: 优化结果不理想怎么办？

**A**: 您可以：
1. 尝试不同的优化模式
2. 在设置中自定义系统提示词
3. 提供更详细的输入内容
4. 使用迭代优化（交换输出到输入）
5. 切换到更强大的模型（如 gpt-4）

#### Q: 如何让输出保持特定格式？

**A**: 在自定义系统提示词中明确指定输出格式。例如：
```
输出格式要求：
- 使用 Markdown 格式
- 包含标题、正文、要点列表
- 代码块使用三个反引号
```

### 数据相关

#### Q: 如何迁移数据到新电脑？

**A**:
1. 在旧电脑的提示词库中点击 **导出**
2. 将导出的 JSON 文件复制到新电脑
3. 在新电脑上点击 **导入**
4. 注意：设置（包括 API Key）需要重新配置

#### Q: 应用数据存储在哪里？

**A**: 数据存储在 macOS 的标准应用数据目录中：
- **提示词数据**：使用 SwiftData 存储在应用容器内
- **设置**：使用 UserDefaults 存储
- **API Key**：安全存储在系统钥匙串中

具体路径：`~/Library/Containers/com.yourcompany.PromptCraft/`

#### Q: 如何完全卸载？

**A**:
1. 退出 PromptCraft
2. 将应用拖入废纸篓
3. 删除应用数据目录：
   ```bash
   rm -rf ~/Library/Containers/com.yourcompany.PromptCraft
   ```
4. 清空废纸篓

### 兼容性相关

#### Q: 支持哪些 AI 服务？

**A**: PromptCraft 支持所有 OpenAI 兼容的 API 服务，包括：
- OpenAI 官方 API
- Azure OpenAI
- DeepSeek
- OpenRouter
- Claude (via OpenRouter)
- 本地 Ollama
- 其他 OpenAI 兼容服务

只需在设置中修改自定义端点即可。

#### Q: 支持哪些模型？

**A**: 验证 API Key 后，应用会自动获取可用模型列表。常见模型：
- GPT-4、GPT-4 Turbo
- GPT-3.5 Turbo
- Claude 3 (Opus/Sonnet/Haiku) - 通过 OpenRouter
- DeepSeek
- Llama 3 - 通过 Ollama

---

## 故障排除

### 应用无法启动

1. **检查系统版本**：确保 macOS 版本 ≥ 14.0 (Sonoma)
2. **安全设置**：前往 **系统设置 → 隐私与安全性**，允许应用运行
3. **重新安装**：删除应用和数据目录后重新安装

### 菜单栏图标不显示

1. 检查菜单栏空间是否足够
2. 尝试重启应用
3. 检查系统偏好设置中是否隐藏了图标

### 快捷键不工作

1. 检查是否与其他应用快捷键冲突
2. 在设置中重新录制快捷键
3. 确认已授予应用"辅助功能"权限：
   **系统设置 → 隐私与安全性 → 辅助功能**

### 优化卡住不动

1. 检查网络连接
2. 查看控制台日志是否有错误信息
3. 增加超时时间
4. 尝试取消后重新优化

### 数据丢失

1. 检查是否意外点击了"清除数据"
2. 尝试从备份 JSON 文件恢复
3. 检查应用数据目录是否存在

---

## 隐私与安全

### 数据存储

| 数据类型 | 存储位置 | 加密方式 |
|----------|----------|----------|
| 提示词内容 | SwiftData 本地数据库 | 系统级加密 |
| 用户设置 | UserDefaults | 无（非敏感） |
| API Key | macOS 钥匙串 | AES-256 |

### 网络传输

- 所有 API 请求均使用 HTTPS 加密
- API Key 仅在请求头中传输，不会发送到第三方
- 提示词内容发送到您配置的 API 端点进行处理

### 隐私建议

1. **保护 API Key**：不要分享您的 API Key
2. **敏感内容**：避免在提示词中包含敏感个人信息
3. **本地优先**：如需处理敏感内容，考虑使用本地 Ollama
4. **定期备份**：导出重要提示词到安全位置

### 权限说明

| 权限 | 用途 |
|------|------|
| 网络访问 | 调用 AI API |
| 辅助功能 | 全局快捷键（可选） |
| 开机启动 | 登录时自动启动（可选） |

---

## 反馈与支持

### 获取帮助

- **查看本手册**：搜索关键词定位问题
- **检查控制台日志**：`Console.app` 中搜索 "PromptCraft"

### 报告问题

如果您遇到 Bug 或有功能建议，请通过以下方式反馈：

1. **GitHub Issues**：[项目 Issues 页面]
   - 描述问题现象
   - 提供复现步骤
   - 附上系统版本和应用版本
   - 如有错误日志请一并附上

2. **提交信息模板**：
   ```
   **问题描述**：

   **复现步骤**：
   1.
   2.
   3.

   **预期行为**：

   **实际行为**：

   **系统信息**：
   - macOS 版本：
   - PromptCraft 版本：
   - API 服务：
   ```

### 贡献代码

欢迎通过 Pull Request 贡献代码：

1. Fork 项目仓库
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

---

## 版本历史

### v1.0 (2025-12-12)
- 初始发布
- 三种优化模式：简洁、详细、专业
- 提示词库管理
- 收藏夹功能
- 历史记录
- 标签与分类
- 菜单栏快速访问
- 全局快捷键
- 多语言支持
- 深色/浅色主题

---

**感谢使用 PromptCraft！**

如果您觉得这个工具有用，欢迎在 GitHub 上给我们一个 ⭐️
